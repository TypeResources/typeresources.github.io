function csvValuesToStringValues(t){return""!=t?(t=t.replace(/ /g,""),t='"'+t,t=t.replace(/,/g,'", "'),t+='"'):""}function getLocalStorageGazeState(){return JSON.parse(localStorage.getItem("gazeState"))}function setLocalStorageState(){localStorage.setItem("gazeState",JSON.stringify(gazeState))}function getUrlGazeState(){for(var t,e=/\+/g,a=/([^&=]+)=?([^&]*)/g,r=function(t){return decodeURIComponent(t.replace(e," "))},n=window.location.search.substring(1),i={};t=a.exec(n);)i[r(t[1])]=r(t[2]);return i}function getBaseUrl(){return window.location.href.replace(/\?.*/,"")}function stateToUri(t){var e=["text","fonts","openType","textAlign","zoom"];uriStr="?";for(var a=0;a<e.length;a++){var r=e[a],n=t[r];n=n.replace(/, /g,","),n=encodeURI(n),n=n.replace(/#/g,"%23"),uriStr+=r+"=",uriStr+=n,uriStr+="&"}return uriStr=uriStr.slice(0,-1),uriStr}var initialGazeState,localStorageGazeState=getLocalStorageGazeState(),gazeStateDefaults={text:"fi",fonts:"Lato:800",openType:"calt, kern, liga",textAlign:"center",zoom:1};svg4everybody(),initialGazeState=$.extend({},initialGazeState,gazeStateDefaults),initialGazeState=$.extend({},initialGazeState,getLocalStorageGazeState()),initialGazeState=$.extend({},initialGazeState,getUrlGazeState());var gg=new Vue({el:"#app",data:{gazeState:initialGazeState},computed:{zoomPercent:function(){return 100*this.gazeState.zoom+"%"},fontArray:function(){var t,e=this.gazeState.fonts,a=[];return t=e.split(","),t.lastIndexOf("")!=-1&&t.pop(),t.forEach(function(t){var e=t.trim(),r="",n=400;e.includes(":")?(r=e.split(":")[0],n=e.split(":")[1]):r=e,a.push({name:'"'+r+'"',weight:n})}),a},openTypeCssValue:function(){var t,e=this.gazeState.openType;e=e.replace(/ /g,"");for(var a=e.split(","),r=[],n=0;n<a.length;n++)4==a[n].length&&r.push(a[n]);for(t=csvValuesToStringValues(r.toString()),t.indexOf("kern")==-1&&(t+=',"kern" off'),t.indexOf("liga")==-1&&(t+=',"liga" off'),t.indexOf("calt")==-1&&(t+=',"calt" off');","===t.charAt(0);)t=t.substr(1);return t}},methods:{updateText:function(t){var e=t.target.innerText;this.gazeState.text=e},saveGazeState:function(){localStorage.setItem("gazeState",JSON.stringify(this.gazeState))},setUrlGazeState:function(){var t=getBaseUrl()+stateToUri(this.gazeState);window.history.pushState("object or string","Title",t)}},watch:{gazeState:{handler:function(t,e){this.saveGazeState(),console.log("new: %s, old: %s",t,e)},deep:!0}}});