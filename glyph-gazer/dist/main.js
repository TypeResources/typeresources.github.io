function csvValuesToStringValues(t){return""!=t?(t=t.replace(/ /g,""),t='"'+t,t=t.replace(/,/g,'", "'),t+='"'):""}function getLocalStorageGazeState(){return JSON.parse(localStorage.getItem("gazeState"))}function setLocalStorageState(){localStorage.setItem("gazeState",JSON.stringify(gazeState))}function getUrlGazeState(){for(var t,e=/\+/g,a=/([^&=]+)=?([^&]*)/g,n=function(t){return decodeURIComponent(t.replace(e," "))},r=window.location.search.substring(1),i={};t=a.exec(r);)i[n(t[1])]=n(t[2]);return i}function getBaseUrl(){return window.location.href.replace(/\?.*/,"")}function stateToUri(t){var e=["text","fonts","openType","textAlign","zoom"];uriStr="?";for(var a=0;a<e.length;a++){var n=e[a],r=t[n];r=r.replace(/, /g,","),r=encodeURI(r),r=r.replace(/#/g,"%23"),uriStr+=n+"=",uriStr+=r,uriStr+="&"}return uriStr=uriStr.slice(0,-1),uriStr}var initialGazeState,localStorageGazeState=getLocalStorageGazeState(),gazeStateDefaults={text:"Adhesion",fonts:"Open Sans, Roboto:900, Source Sans Pro:200",textAlign:"center",openType:"kern, calt, liga",zoom:"1"};svg4everybody(),initialGazeState=$.extend({},initialGazeState,gazeStateDefaults),initialGazeState=$.extend({},initialGazeState,getLocalStorageGazeState()),initialGazeState=$.extend({},initialGazeState,getUrlGazeState());var gg=new Vue({el:"#app",data:{gazeState:initialGazeState},computed:{zoomPercent:function(){return 100*this.gazeState.zoom+"%"},fontArray:function(){var t,e=this.gazeState.fonts,a=[];return t=e.split(","),t.lastIndexOf("")!=-1&&t.pop(),t.forEach(function(t){var e=t.trim(),n="",r=400;e.includes(":")?(n=e.split(":")[0],r=e.split(":")[1]):n=e,a.push({name:'"'+n+'"',weight:r})}),a},openTypeCssValue:function(){var t,e=this.gazeState.openType;e=e.replace(/ /g,"");for(var a=e.split(","),n=[],r=0;r<a.length;r++)4==a[r].length&&n.push(a[r]);for(t=csvValuesToStringValues(n.toString()),t.indexOf("kern")==-1&&(t+=',"kern" off'),t.indexOf("liga")==-1&&(t+=',"liga" off'),t.indexOf("calt")==-1&&(t+=',"calt" off');","===t.charAt(0);)t=t.substr(1);return t}},methods:{updateText:function(t){var e=t.target.innerText;this.gazeState.text=e},saveGazeState:function(){localStorage.setItem("gazeState",JSON.stringify(this.gazeState))},setUrlGazeState:function(){var t=getBaseUrl()+stateToUri(this.gazeState);window.history.pushState("object or string","Title",t)},clearUrl:function(){var t=window.location.href,e=getBaseUrl();t!=e&&(window.history.pushState("object or string","Title",e),console.log("URL cleared"))},resetToDefaults:function(){this.gazeState=$.extend({},{},gazeStateDefaults)},setAlign:function(t){this.gazeState.textAlign=t}},watch:{gazeState:{handler:function(t,e){this.saveGazeState(),this.clearUrl()},deep:!0}}});